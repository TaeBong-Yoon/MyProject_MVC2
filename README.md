# MyProject_MVC2

MyProject에서 사용했던 방식에 대한 단점
- 코드가 지저분해진다.
- 어디서 어떤 클래스를 호출 했고, 어떤 메소드에 값을 넣어주고, 받아와야 하는지 찾기가 힘들다.

MyProject_MVC2 를 진행하며
- https://all-record.tistory.com/ 이 분의 블로그롤 참고하며 공부를 진행했다.
- MySQL을 사용하는 나와 다르게 Oracle로 DB가 구성되어 있었다.
- 덕분에 Oracle과 MySQL의 차이점을 확실하게 알게 되었고,
- 숱한 오류 해결을 위한 구글링을 걸쳐서 나만의 데이터 구조를 만들 수 있었다.

DB구조
- 회원의 모든 정보가 담긴 jsp_member
- 게시글의 모든 정보가 담긴 member_board
- 댓글의 모든 정보가 담긴 board_comment
- 방문자 수를 체크하는 visit

DB구조를 만들면서 겪은 첫번째 문제
- Oracle의 Sequence를 MySQL에서 구현할 수가 없었다.(당시의 지식으로)
- 그래서 Sequence와 쓰임새가 비슷하다고 생각된 Auto_increment를 적용했다.

DB구조를 만들면서 겪은 두번째 문제
- 참고했던 블로그의 게시판,방명록 부분은 Oracle 계층쿼리가 적용되어 있었다.
- 당시에는 계층쿼리가 뭔지, 왜 적용되야 하는지를 읽어보면서 이해하려 했고, MySQL에 적용하는 방법을 찾아보았다.
- 하지만, MySQL에서는 함수를 만들어 적용해야 했는데, 게시판에 적용시키기엔 너무 복잡한 방법이였다.
- 게시글의 해당하는 댓글, 댓글에 해당하는 대댓글 등을 구현하는 방법을 생각하다가
- 댓글 테이블을 구조를 다음과 같이 정리해 보았다.

- 댓글의 번호 comment_num => auto_increment
- 댓글의 원글 commnet_board => member_board테이블의 board_num을 FK로 지정
- 대댓글의 원글 comment_parent => comment_num을 FK로 지정
- 게시글에 바로 달리는 댓글의 경우엔 comment_parent가 null이 된다.
- 댓글의 대댓글의 경우엔 해당 댓글의 comment_num을 갖게되고, 해당 댓글과 같은 comment_board값을 가진다.

DB구조를 다 만들고 나서의 문제는 페이징 처리와 게시글의 순서, 댓글의 순서였다.
- 페이지의 숫자가 커질수록 등록된 글이 나중에 처리되야 했고, 한 페이지에는 5개의 글을 보일 계획이였다.
- SELECT * FROM member_board ORDER BY board_num DESC LIMIT 5; 해당 쿼리 문이 말썽이였다.
- 이에 대한 해결방법을 생각해보다가 DESC LIMIT ?,?; 를 적용했고
- setInt(1, (페이지번호-1)*5);
- setInt(2, 5); 를 적용해서 1페이지의 경우엔 0,5 => 끝에서 5개 => 이걸 DESC로 내림차순
- 하여 해결할 수 있었다!


해당 프로젝트를 진행하면서 느낀 점
- MVC2 를 적용한 JSP로는 포트폴리오를 완성하기엔 부족하다고 많이 느꼈다.
- 그래서 Spring MVC와 SpringBoot를 공부하고 있는 중에
- 내가 해당 프로젝트에서 적용한 Controller 가 Spring Framework에서는
- 더 간단하고, 더 생산적으로 만들 수 있다는 것을 알게 되었다.
- JSP 프로젝트가 쓸모없는 과정이였다고 실망했었지만 Spring 을 배우면서 쓸모없는 시간이 아니였음을 깨달았다.
- 분명 Spring을 배우다보면 또 그런 경우가 생길것이고, 앞으로도 공부하는 모든 부분에서 적용될 걸 생각해보면
- 앞으로 하는 모든 공부, 업무에 있어서 좀 더 의욕적으로 해볼 수 있겠다 라는 확신이 들었다

콘솔창에 뜨는 에러들을 보면 한숨만 나왔지만, 그 오류들 모두 누군가가 경험해본 오류였다

그리고 나도 언젠간 그 분들처럼 나의 오류를 공유하고, 해결방법까지 제시하는 사람이 될거다.
